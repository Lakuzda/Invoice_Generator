<div class="centered-form">
  <form [formGroup]="invoiceForm" (ngSubmit)="submit()" class="form-container">
    <div formArrayName="items">
      <div
        *ngFor="let item of items.controls; let i = index"
        [formGroupName]="i"
      >
        <mat-form-field appearance="fill">
          <mat-label>Item Name</mat-label>
          <input matInput formControlName="name" placeholder="Item Name" />
          <mat-error *ngIf="item.get('name')?.invalid">
            Name is required (3-30 characters)
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Quantity</mat-label>
          <input
            matInput
            formControlName="count"
            type="number"
            placeholder="Quantity"
          />
          <mat-error *ngIf="item.get('count')?.invalid">
            Quantity must be between 1 and 100 and must be integer
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Price</mat-label>
          <input
            matInput
            formControlName="price"
            type="number"
            placeholder="Price"
          />
          <mat-error *ngIf="item.get('price')?.invalid">
            Price must be between 1 and 1,000,000 and must be integer
          </mat-error>
        </mat-form-field>

        <button mat-button color="warn" (click)="removeItem(i)" type="button">
          Remove
        </button>
      </div>
    </div>

    <button mat-raised-button color="primary" type="button" (click)="addItem()">
      Add Item
    </button>
    <button mat-raised-button color="accent" type="submit">Submit</button>
  </form>
</div>
